apiVersion: mlops.mlops.dev/v1alpha1
kind: NotebookValidationJob
metadata:
  name: credentials-sugar-example
  namespace: mlops
spec:
  notebook:
    git:
      url: "https://github.com/tosin2013/jupyter-notebook-validator-test-notebooks.git"
      ref: "main"
    path: "notebooks/tier3-complex/03-aws-credentials-test.ipynb"
  
  podConfig:
    containerImage: "quay.io/jupyter/minimal-notebook:latest"
    serviceAccountName: "notebook-validator-jupyter-notebook-validator-runner"
    
    # NEW: Simplified credentials syntax (syntactic sugar)
    # This is much more user-friendly than envFrom
    credentials:
      - "aws-credentials"
      - "database-credentials"
      - "mlflow-credentials"
    
    # The above is automatically converted to:
    # envFrom:
    #   - secretRef:
    #       name: "aws-credentials"
    #   - secretRef:
    #       name: "database-credentials"
    #   - secretRef:
    #       name: "mlflow-credentials"
    
    # You can also mix both syntaxes if needed:
    # credentials: ["aws-credentials"]  # Simple secrets
    # envFrom:                           # Complex sources
    #   - configMapRef:
    #       name: "app-config"
    
    buildConfig:
      enabled: true
      strategy: "tekton"
    
    resources:
      limits:
        memory: "2Gi"
        cpu: "1000m"
      requests:
        memory: "1Gi"
        cpu: "500m"
  
  timeout: "15m"

